(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();const H="modulepreload",T=function(e){return"/Teleprompter/"+e},E={},P=function(t,i,a){let o=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(i.map(u=>{if(u=T(u),u in E)return;E[u]=!0;const g=u.endsWith(".css"),f=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=g?"stylesheet":H,g||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),g)return new Promise((d,W)=>{p.addEventListener("load",d),p.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return o.then(s=>{for(const l of s||[])l.status==="rejected"&&c(l.reason);return t().catch(c)})};function A(e={}){const{immediate:t=!1,onNeedRefresh:i,onOfflineReady:a,onRegistered:o,onRegisteredSW:c,onRegisterError:s}=e;let l,u;const g=async(p=!0)=>{await u};async function f(){if("serviceWorker"in navigator){const{Workbox:p}=await P(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:d}},[]);l=new p("/Teleprompter/sw.js",{scope:"/Teleprompter/",type:"classic"}),l.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),l.addEventListener("installed",d=>{d.isUpdate||a==null||a()}),l.register({immediate:t}).then(d=>{c?c("/Teleprompter/sw.js",d):o==null||o(d)}).catch(d=>{s==null||s(d)})}}return u=f(),g}A({immediate:!0});const n={isListening:!1,scriptWords:[],currentIndex:0,recognition:null,isMirrored:!1,config:{fontSize:20,lineHeight:1.5,textColor:"#ffffff",bgColor:"#000000",textAlign:"center",showStopIcon:!1}},r={setupScreen:document.getElementById("setupScreen"),prompterContainer:document.getElementById("prompterContainer"),inputScript:document.getElementById("inputScript"),scriptContent:document.getElementById("scriptContent"),scrollContainer:document.getElementById("scrollContainer"),topSpacer:document.getElementById("topSpacer"),settingsPanel:document.getElementById("settingsPanel"),fontSizeInput:document.getElementById("fontSizeInput"),fontSizeVal:document.getElementById("fontSizeVal"),lineHeightInput:document.getElementById("lineHeightInput"),lineHeightVal:document.getElementById("lineHeightVal"),textColorInput:document.getElementById("textColorInput"),bgColorInput:document.getElementById("bgColorInput"),appBody:document.getElementById("appBody"),micButton:document.getElementById("micButton"),micIcon:document.getElementById("micIcon"),statusIndicator:document.getElementById("statusIndicator"),mirrorBtn:document.getElementById("mirrorBtn"),mirrorToggleKnob:document.getElementById("mirrorToggleKnob"),browserWarning:document.getElementById("browserWarning"),historyList:document.getElementById("historyList"),historySection:document.getElementById("historySection"),stopSignToggle:document.getElementById("stopSignToggle"),alignBtns:{left:document.getElementById("alignLeftBtn"),center:document.getElementById("alignCenterBtn"),right:document.getElementById("alignRightBtn")},loadScriptBtn:document.getElementById("loadScriptBtn"),clearHistoryBtn:document.getElementById("clearHistoryBtn"),resetAppBtn:document.getElementById("resetAppBtn"),restartScriptBtn:document.getElementById("restartScriptBtn"),toggleSettingsBtn:document.getElementById("toggleSettingsBtn"),themeDarkBtn:document.getElementById("themeDarkBtn"),themeLightBtn:document.getElementById("themeLightBtn")},S=window.SpeechRecognition||window.webkitSpeechRecognition;S?(n.recognition=new S,n.recognition.continuous=!0,n.recognition.interimResults=!0,n.recognition.lang="en-US"):r.browserWarning.classList.remove("hidden");v();R();function C(e=null){let t=e||r.inputScript.value.trim();if(!t)return alert("Please enter some text.");e||_(t),t=t.replace(/\n+/g," ||LB|| ");const i=t.split(/\s+/);let a=!1;n.scriptWords=i.map(o=>{if(o==="||LB||")return{word:"ðŸ›‘",clean:"",element:null,skip:!0,isStop:!0};o.startsWith("[")&&(a=!0);const c=o.toLowerCase().replace(/[^\w\s]|_/g,"").replace(/\s+/g," "),s=c.length===0,l=a||s||o.includes("ðŸ›‘");return o.endsWith("]")&&(a=!1),{word:o,clean:c,element:null,skip:l,isStop:!1}}),r.scriptContent.innerHTML="",n.scriptWords.forEach((o,c)=>{const s=document.createElement("span");s.textContent=o.word,s.id=`word-${c}`;let l="script-word transition-opacity duration-300 ";o.isStop?l+="stop-marker ":o.skip?l+="skipped-word ":l+="text-future hover:text-blue-400 ",s.className=l,s.onclick=()=>{o.skip||(n.currentIndex=c,m(),B())},r.scriptContent.appendChild(s),o.element=s}),n.config.showStopIcon?r.scriptContent.classList.add("show-stops"):r.scriptContent.classList.remove("show-stops"),r.setupScreen.classList.add("hidden"),r.prompterContainer.classList.remove("hidden"),n.currentIndex=0,L(),m()}function L(){for(;n.currentIndex<n.scriptWords.length&&n.scriptWords[n.currentIndex].skip;)n.currentIndex++}function O(){k(),r.prompterContainer.classList.add("hidden"),r.setupScreen.classList.remove("hidden"),v()}function b(){n.currentIndex=0,L(),m(),B(),r.scrollContainer.scrollTop=0}function _(e){let t=JSON.parse(localStorage.getItem("teleprompter_history")||"[]");if(t.length>0&&t[0].text===e)return;const i={id:Date.now(),text:e,preview:e.substring(0,40)+(e.length>40?"...":""),date:new Date().toLocaleDateString()};t.unshift(i),t.length>10&&t.pop(),localStorage.setItem("teleprompter_history",JSON.stringify(t))}function v(){let e=JSON.parse(localStorage.getItem("teleprompter_history")||"[]");if(r.historyList.innerHTML="",e.length===0){r.historyList.innerHTML=`
            <div class="text-center py-8 border border-dashed border-neutral-800 rounded-lg text-neutral-600 text-sm">
                No previous scripts found
            </div>
        `,r.clearHistoryBtn.classList.add("hidden");return}r.clearHistoryBtn.classList.remove("hidden"),e.forEach(t=>{const i=document.createElement("div");i.className="bg-neutral-800 p-3 rounded border border-neutral-700 hover:border-blue-500 cursor-pointer transition group flex justify-between items-center shadow-sm",i.onclick=()=>{r.inputScript.value=t.text,C(t.text)},i.innerHTML=`
            <div class="flex flex-col text-left overflow-hidden mr-2">
                <span class="text-gray-300 text-sm font-medium truncate font-mono">${t.preview}</span>
                <span class="text-gray-500 text-xs">${t.date}</span>
            </div>
            <div class="flex-shrink-0">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-500 opacity-0 group-hover:opacity-100 transition" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
            </div>
        `,r.historyList.appendChild(i)})}function z(){confirm("Clear all recent scripts?")&&(localStorage.removeItem("teleprompter_history"),v())}n.recognition&&(n.recognition.onresult=e=>{let t="";for(let o=e.resultIndex;o<e.results.length;o++)t+=e.results[o][0].transcript;const i=t.trim().toLowerCase().split(/\s+/);if(i.slice(-5).join(" ").includes("prompter restart")){b();return}M(i.slice(-5))},n.recognition.onend=()=>{if(n.isListening)try{n.recognition.start()}catch{}else I(!1)});function M(e){if(n.currentIndex>=n.scriptWords.length)return;const t=5;for(let i of e){const a=i.replace(/[^\w]|_/g,"");if(!a)continue;let o=n.currentIndex,c=0;for(;o<n.scriptWords.length&&c<t;){const s=n.scriptWords[o];if(s.skip){o++;continue}if(s.clean===a){n.currentIndex=o+1,L(),m(),B();return}o++,c++}}}function m(){n.scriptWords.forEach((e,t)=>{e.skip||e.isStop||e.element&&(t<n.currentIndex?(e.element.classList.remove("text-future","current-word","font-bold"),e.element.classList.add("text-past"),e.element.style.opacity=""):t===n.currentIndex?(e.element.classList.remove("text-future","text-past"),e.element.classList.add("current-word","font-bold"),e.element.style.opacity="1"):(e.element.classList.remove("text-past","current-word","font-bold"),e.element.classList.add("text-future"),e.element.style.opacity=""))})}function B(){if(n.currentIndex>0&&n.currentIndex<n.scriptWords.length){const e=n.scriptWords[n.currentIndex].element;if(e){const t=r.scrollContainer.clientHeight,i=e.offsetTop-t/3;r.scrollContainer.scrollTo({top:i,behavior:"smooth"})}}}function N(){if(!n.recognition)return alert("Speech recognition not supported.");n.isListening?k():$()}function $(){try{n.recognition.start(),n.isListening=!0,I(!0)}catch(e){console.error(e)}}function k(){n.isListening=!1,n.recognition.stop(),I(!1)}function I(e){const t=r.micButton,i=r.statusIndicator;e?(t.classList.add("bg-red-600","border-red-400","recording-pulse"),t.classList.remove("bg-neutral-800","border-neutral-600"),i.classList.remove("hidden")):(t.classList.remove("bg-red-600","border-red-400","recording-pulse"),t.classList.add("bg-neutral-800","border-neutral-600"),i.classList.add("hidden"))}function x(){const e=r.settingsPanel;e.classList.contains("hidden")?(e.classList.remove("hidden"),setTimeout(()=>{e.classList.remove("scale-95","opacity-0"),e.classList.add("scale-100","opacity-100")},10)):(e.classList.remove("scale-100","opacity-100"),e.classList.add("scale-95","opacity-0"),setTimeout(()=>{e.classList.add("hidden")},200))}function w(e){e==="dark"?(n.config.bgColor="#000000",n.config.textColor="#ffffff"):(n.config.bgColor="#ffffff",n.config.textColor="#000000"),r.bgColorInput.value=n.config.bgColor,r.textColorInput.value=n.config.textColor,y()}function h(e){n.config.textAlign=e,r.scriptContent.style.textAlign=e,["left","center","right"].forEach(t=>{const i=r.alignBtns[t];t===e?(i.classList.remove("hover:bg-neutral-600"),i.classList.add("bg-neutral-500","text-white")):(i.classList.add("hover:bg-neutral-600"),i.classList.remove("bg-neutral-500","text-white"))})}function y(){r.appBody.style.backgroundColor=n.config.bgColor,r.appBody.style.color=n.config.textColor}function D(){n.isMirrored=!n.isMirrored;const e=r.mirrorToggleKnob,t=r.mirrorBtn;n.isMirrored?(r.scriptContent.classList.add("mirror-mode"),e.classList.add("translate-x-6"),t.classList.add("bg-blue-600"),t.classList.remove("bg-neutral-600")):(r.scriptContent.classList.remove("mirror-mode"),e.classList.remove("translate-x-6"),t.classList.remove("bg-blue-600"),t.classList.add("bg-neutral-600"))}function R(){r.loadScriptBtn.addEventListener("click",()=>C()),r.clearHistoryBtn.addEventListener("click",z),r.resetAppBtn.addEventListener("click",O),r.restartScriptBtn.addEventListener("click",b),r.micButton.addEventListener("click",N),r.toggleSettingsBtn.addEventListener("click",x),r.themeDarkBtn.addEventListener("click",()=>w("dark")),r.themeLightBtn.addEventListener("click",()=>w("light")),r.alignBtns.left.addEventListener("click",()=>h("left")),r.alignBtns.center.addEventListener("click",()=>h("center")),r.alignBtns.right.addEventListener("click",()=>h("right")),r.stopSignToggle.addEventListener("change",e=>{n.config.showStopIcon=e.target.checked,n.config.showStopIcon?r.scriptContent.classList.add("show-stops"):r.scriptContent.classList.remove("show-stops")}),r.fontSizeInput.addEventListener("input",e=>{const t=e.target.value;n.config.fontSize=parseInt(t),r.fontSizeVal.textContent=`${t}px`,r.scriptContent.style.fontSize=`${t}px`}),r.lineHeightInput.addEventListener("input",e=>{const t=e.target.value;n.config.lineHeight=parseFloat(t),r.lineHeightVal.textContent=`${t}x`,r.scriptContent.style.lineHeight=t}),r.textColorInput.addEventListener("input",e=>{n.config.textColor=e.target.value,y()}),r.bgColorInput.addEventListener("input",e=>{n.config.bgColor=e.target.value,y()}),r.mirrorBtn.addEventListener("click",D),document.addEventListener("click",e=>{const t=r.settingsPanel,i=r.toggleSettingsBtn;!t.classList.contains("hidden")&&!t.contains(e.target)&&!i.contains(e.target)&&x()})}
